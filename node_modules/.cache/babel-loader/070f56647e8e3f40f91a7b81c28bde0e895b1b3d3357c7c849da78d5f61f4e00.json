{"ast":null,"code":"import _toConsumableArray from\"/Users/danieldavis/projects/plat4m/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import React,{useState,useEffect}from'react';import Button from'@material-ui/core/Button';import Card from'@material-ui/core/Card';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Addendum(props){function stateUpdater(id,id2,dir){props.allData.forEach(function(item){if(item.id===id){item.addenda.forEach(function(addendum){if(addendum.id===id2){addendum[dir]=addendum[dir]+1;}});}});props.updater(_toConsumableArray(props.allData));}var incrementYes=function incrementYes(id,id2){fetch(\"http://localhost:3001/\".concat(id,\"/\").concat(id2),{method:'POST',mode:'cors',headers:{'Access-Control-Allow-Origin':'*','Content-Type':'application/json'},body:JSON.stringify({'vote':'up'}),json:true});stateUpdater(id,id2,'ups');};var incrementNo=function incrementNo(id,id2){fetch(\"http://localhost:3001/\".concat(id,\"/\").concat(id2),{method:'POST',mode:'cors',headers:{'Access-Control-Allow-Origin':'*','Content-Type':'application/json'},body:JSON.stringify({'vote':'down'}),json:true});stateUpdater(id,id2,'downs');};function handleClickYes(){incrementYes(props.propId,props.id);if(props.predicate&&props.ups>props.majority-1){props.incrementYes(props.propId);}}function handleClickNo(){incrementNo(props.propId,props.id);if(props.predicate&&props.downs>props.majority-1){props.incrementNo(props.propId);}}var status;// three-way style assignment for vote status\nif(props.ups>props.majority){status='passed-addendum';}else if(props.downs>props.majority){if(!props.showClosed){status='hidden-failed-addendum';}else{status='failed-addendum';}}else{status='open-addendum';}var statusVariant;// mui specific assignment\nstatusVariant=props.ups>props.majority||props.downs>props.majority?'outlined':'contained';return/*#__PURE__*/_jsxs(\"div\",{className:\"addendum \".concat(status),children:[/*#__PURE__*/_jsxs(\"div\",{style:{flexDirection:'column'},children:[/*#__PURE__*/_jsx(Button,{className:\"add-button\",variant:\"contained\",color:\"secondary\",style:{marginTop:'-6px'},onClick:handleClickNo,children:\"No\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{cursor:'not-allowed',pointerEvents:'none'},children:/*#__PURE__*/_jsx(Button,{className:\"add-button\",style:{fontSize:'16px',border:'solid 1.7px',maxHeight:'36.5px',marginTop:'2px'},variant:\"outlined\",color:\"secondary\",children:props.downs})})]}),/*#__PURE__*/_jsx(Card,{className:\"addendum-inner\",variant:statusVariant,style:{backgroundColor:'rgb(190, 190, 190)',border:props.predicate&&(props.ups<props.majority||props.down<props.majority)?'solid 1.7px rgb(246,0,87)':'none'},children:props.claim}),/*#__PURE__*/_jsxs(\"div\",{style:{flexDirection:'column'},children:[/*#__PURE__*/_jsx(Button,{className:\"add-button\",variant:\"contained\",color:\"primary\",style:{marginTop:'-6px'},onClick:handleClickYes,children:\"Yes\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{style:{cursor:'not-allowed',pointerEvents:'none'},children:/*#__PURE__*/_jsx(Button,{className:\"add-button\",style:{fontSize:'16px',border:'solid 1.7px',maxHeight:'36.5px',marginTop:'2px'},variant:\"outlined\",color:\"primary\",children:props.ups})})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Button","Card","jsx","_jsx","jsxs","_jsxs","Addendum","props","stateUpdater","id","id2","dir","allData","forEach","item","addenda","addendum","updater","_toConsumableArray","incrementYes","fetch","concat","method","mode","headers","body","JSON","stringify","json","incrementNo","handleClickYes","propId","predicate","ups","majority","handleClickNo","downs","status","showClosed","statusVariant","className","children","style","flexDirection","variant","color","marginTop","onClick","cursor","pointerEvents","fontSize","border","maxHeight","backgroundColor","down","claim"],"sources":["/Users/danieldavis/projects/plat4m/src/Addendum.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\n\nexport default function Addendum(props) {\n\n  function stateUpdater(id, id2, dir) {\n    props.allData.forEach((item) => { \n      if (item.id === id) { \n        item.addenda.forEach((addendum) => {\n          if (addendum.id === id2) {\n            addendum[dir] = addendum[dir] + 1\n          }\n        })\n    } })\n    props.updater([...props.allData])\n  }\n\n  const incrementYes = (id, id2) => {\n    fetch(`http://localhost:3001/${id}/${id2}`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n       },\n      body: JSON.stringify({ 'vote': 'up' }),\n      json: true\n    })\n    stateUpdater(id, id2, 'ups')\n  }\n  const incrementNo = (id, id2) => {\n    fetch(`http://localhost:3001/${id}/${id2}`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n       },\n      body: JSON.stringify({ 'vote': 'down' }),\n      json: true\n    })\n    stateUpdater(id, id2, 'downs')\n  }\n\n  function handleClickYes() { \n    incrementYes(props.propId, props.id) \n    if (props.predicate && props.ups > props.majority - 1) { props.incrementYes(props.propId) }\n  }\n  function handleClickNo() { \n    incrementNo(props.propId, props.id) \n    if (props.predicate && props.downs > props.majority - 1) { props.incrementNo(props.propId) }\n  }\n\n  let status // three-way style assignment for vote status\n  if (props.ups > props.majority) {\n    status = 'passed-addendum'\n  } else if (props.downs > props.majority) {\n    if (!props.showClosed) {\n      status = 'hidden-failed-addendum'\n    } else {\n      status = 'failed-addendum'\n    }\n  } else {\n    status = 'open-addendum'\n  }\n  let statusVariant // mui specific assignment\n  statusVariant = (props.ups > props.majority || props.downs > props.majority) ? 'outlined' : 'contained'\n\n  return (\n    <div className={`addendum ${status}`}>\n      <div style={{ flexDirection: 'column' }}>\n        <Button className='add-button'\n          variant=\"contained\"\n          color=\"secondary\"\n          style={{ marginTop: '-6px' }}\n          onClick={handleClickNo}\n        >\n          No\n        </Button>\n        <br />\n        <span style={{ cursor: 'not-allowed', pointerEvents: 'none' }}>\n          <Button className='add-button'\n            style={{ fontSize: '16px', border: 'solid 1.7px', maxHeight: '36.5px', marginTop: '2px' }}\n            variant=\"outlined\"\n            color=\"secondary\"\n          >\n            {props.downs}\n          </Button>\n        </span>\n      </div>\n      <Card className='addendum-inner' variant={statusVariant} \n        style={{ \n          backgroundColor: 'rgb(190, 190, 190)',\n          border: (props.predicate && (props.ups < props.majority || props.down < props.majority) ) ? 'solid 1.7px rgb(246,0,87)' : 'none'\n        }}>\n        {props.claim}\n      </Card>\n      <div style={{ flexDirection: 'column' }}>\n        <Button className='add-button'\n          variant=\"contained\"\n          color=\"primary\"\n          style={{ marginTop: '-6px' }}\n          onClick={handleClickYes}\n        >\n          Yes\n        </Button>\n        <br />\n        <span style={{ cursor: 'not-allowed', pointerEvents: 'none' }}>\n          <Button className='add-button'\n            style={{ fontSize: '16px', border: 'solid 1.7px',  maxHeight: '36.5px', marginTop: '2px' }}\n            variant=\"outlined\"\n            color=\"primary\"\n          >\n            {props.ups}\n          </Button>\n        </span>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}