{"ast":null,"code":"import _toConsumableArray from\"/Users/danieldavis/projects/plat4m/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/danieldavis/projects/plat4m/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import Button from'@material-ui/core/Button';import Card from'@material-ui/core/Card';import TextField from'@material-ui/core/TextField';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function NewAddendum(props){// text entry box rendered within Proposition components on YES AND, NO BUT votes.\n// displays text box, cancel or submit buttons. closes on submit.\n// API call for post one addendum is handled here.\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),inputText=_useState2[0],setInputText=_useState2[1];// tracks text of new addendum entry\nvar stateUpdater=function stateUpdater(post){// updates children in state for display without API call\nprops.allData.forEach(function(item){// data intensive - simplify\nif(item.id===props.propoId){item.addenda.push(post);}});props.updater(_toConsumableArray(props.allData));};var postNew=function postNew(post){fetch(\"http://localhost:3001/\".concat(props.propoId),{// post child to backend\nmethod:'POST',mode:'cors',headers:{'Access-Control-Allow-Origin':'*','Content-Type':'application/json'},body:JSON.stringify(post),json:true});stateUpdater(post);};var handleSubmit=function handleSubmit(){// completes and JSONifies new child, calls poster\nif(inputText){var post={'id':props.addenda.length+1,'text':inputText,'ups':1,'downs':0,'predicate':props.predicate};postNew(post);}props.handleCancel();};return/*#__PURE__*/_jsxs(\"div\",{className:\"new-addendum-entry\",children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",onClick:props.handleCancel,children:\"\\u2715\"}),/*#__PURE__*/_jsx(TextField,{multiline:true,minRows:\"2\",onChange:function onChange(e){setInputText(e.target.value);},value:inputText,className:\"new-addendum-textbox\",style:{backgroundColor:props.predicate?'rgb(245, 196, 213)':'rgb(246, 246, 246)'},variant:\"outlined\",label:\"Propose an Addendum\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:handleSubmit,children:\"\\u2713\"})]});}","map":{"version":3,"names":["React","useState","Button","Card","TextField","jsx","_jsx","jsxs","_jsxs","NewAddendum","props","_useState","_useState2","_slicedToArray","inputText","setInputText","stateUpdater","post","allData","forEach","item","id","propoId","addenda","push","updater","_toConsumableArray","postNew","fetch","concat","method","mode","headers","body","JSON","stringify","json","handleSubmit","length","predicate","handleCancel","className","children","variant","color","onClick","multiline","minRows","onChange","e","target","value","style","backgroundColor","label"],"sources":["/Users/danieldavis/projects/plat4m/src/NewAddendum.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Card from '@material-ui/core/Card';\nimport TextField from '@material-ui/core/TextField';\n\nexport default function NewAddendum(props) {\n  // text entry box rendered within Proposition components on YES AND, NO BUT votes.\n  // displays text box, cancel or submit buttons. closes on submit.\n  // API call for post one addendum is handled here.\n\n  let [inputText, setInputText] = useState('') // tracks text of new addendum entry\n\n  const stateUpdater = post => { // updates children in state for display without API call\n    props.allData.forEach(item => { // data intensive - simplify\n      if (item.id === props.propoId) { \n        item.addenda.push(post)\n    } })\n    props.updater([...props.allData])\n  }\n  const postNew = post => {\n    fetch(`http://localhost:3001/${props.propoId}`, { // post child to backend\n      method: 'POST',\n      mode: 'cors',\n      headers: {\n        'Access-Control-Allow-Origin': '*',\n        'Content-Type': 'application/json'\n       },\n      body: JSON.stringify(post),\n      json: true\n    })\n    stateUpdater(post)\n  }\n\n  const handleSubmit = () => { // completes and JSONifies new child, calls poster\n    if (inputText) {\n      const post = {\n        'id': props.addenda.length + 1,\n        'text': inputText,\n        'ups': 1,\n        'downs': 0,\n        'predicate': props.predicate\n      }\n      postNew(post)  \n    }\n    props.handleCancel()\n  }\n\n  return (\n    <div className='new-addendum-entry'>\n      {/* read horizontally as button-card-button */}\n      <Button\n        variant='contained'\n        color='secondary'\n        onClick={props.handleCancel}>\n        ✕\n      </Button>\n      <TextField\n        multiline={true} minRows='2'\n        onChange={(e) => {setInputText(e.target.value)}} \n        value={inputText}\n        className='new-addendum-textbox'\n        style={{ backgroundColor: props.predicate ? 'rgb(245, 196, 213)' : 'rgb(246, 246, 246)' }}\n        variant='outlined'\n        label='Propose an Addendum'/>\n      <Button\n        variant='contained'\n        color='primary'\n        onClick={handleSubmit}>\n        ✓\n      </Button>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}